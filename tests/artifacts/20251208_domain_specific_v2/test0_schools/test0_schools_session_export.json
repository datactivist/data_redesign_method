{
  "version": "1.0",
  "feature": "domain-specific-transformations",
  "exported_at": "2025-12-08T16:27:12.590450Z",
  "session_id": "test0_schools_20251208_162700",
  "config_name": "test0_schools",
  "config_description": "French middle schools - student counts and performance scores",
  "current_output": {
    "level": 3,
    "level_name": "LEVEL_3_LINKED",
    "output_type": "unknown",
    "value": "88.25365853658536"
  },
  "navigation_tree": {
    "nodes": [
      {
        "id": "e2085df9-b305-4db8-8053-e42a48415fc7",
        "level": 4,
        "level_name": "LEVEL_4_UNLINKABLE",
        "parent_id": null,
        "children_ids": [
          "28ff39b5-3f2a-4a46-b3dc-edda4d6bde83"
        ],
        "action": "entry",
        "timestamp": "2025-12-08T16:27:01.205297",
        "decision_description": "Loaded 2 raw data sources",
        "design_rationale": "L4 represents unlinkable raw files before semantic processing",
        "params": {
          "source_files": [
            "fr-en-college-effectifs-niveau-sexe-lv.csv",
            "fr-en-indicateurs-valeur-ajoutee-colleges.csv"
          ]
        },
        "output_snapshot": {
          "level": 4,
          "type": "dict_of_dataframes",
          "source_count": 2,
          "sources": {
            "fr-en-college-effectifs-niveau-sexe-lv.csv": {
              "rows": 50164,
              "columns": [
                "num_ligne",
                "Rentrée scolaire",
                "Code région académique",
                "Code région Insee",
                "Région académique"
              ]
            },
            "fr-en-indicateurs-valeur-ajoutee-colleges.csv": {
              "rows": 20053,
              "columns": [
                "num_ligne",
                "Session",
                "UAI",
                "Nom de l'établissement",
                "Commune"
              ]
            }
          }
        }
      },
      {
        "id": "28ff39b5-3f2a-4a46-b3dc-edda4d6bde83",
        "level": 3,
        "level_name": "LEVEL_3_LINKED",
        "parent_id": "e2085df9-b305-4db8-8053-e42a48415fc7",
        "children_ids": [
          "c97a1d55-98a7-40f8-8cbc-0732899a55ba"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T16:27:12.547278",
        "decision_description": "Semantic join: Patronyme ↔ Nom de l'établissement",
        "design_rationale": "Used embedding-based semantic matching (threshold=0.85) to link 'fr-en-college-effectifs-niveau-sexe-lv.csv' with 'fr-en-indicateurs-valeur-ajoutee-colleges.csv'. This creates relationships between previously unlinkable records based on semantic similarity of text fields.",
        "params": {
          "left_file": "fr-en-college-effectifs-niveau-sexe-lv.csv",
          "right_file": "fr-en-indicateurs-valeur-ajoutee-colleges.csv",
          "left_column": "Patronyme",
          "right_column": "Nom de l'établissement",
          "similarity_threshold": 0.85,
          "join_type": "semantic_best_match"
        },
        "output_snapshot": {
          "level": 3,
          "type": "joined_dataframe",
          "row_count": 410,
          "column_count": 111,
          "has_similarity_column": true,
          "columns_sample": [
            "num_ligne",
            "Rentrée scolaire",
            "Code région académique",
            "Code région Insee",
            "Région académique",
            "Code académie",
            "Académie",
            "Code département",
            "Département",
            "Code commune"
          ]
        }
      },
      {
        "id": "c97a1d55-98a7-40f8-8cbc-0732899a55ba",
        "level": 2,
        "level_name": "LEVEL_2_CATEGORIZED",
        "parent_id": "28ff39b5-3f2a-4a46-b3dc-edda4d6bde83",
        "children_ids": [
          "0038162d-579c-4ff7-9db6-3ee561261715"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T16:27:12.567190",
        "decision_description": "Applied 'location_type' dimension",
        "design_rationale": "Categorized rows using business logic based on 'nombre_eleves_total'. This adds analytical dimensions that enable grouping and filtering for downstream analysis.",
        "params": {
          "category_name": "location_type",
          "category_column": "nombre_eleves_total",
          "category_function": "categorize_school_location"
        },
        "output_snapshot": {
          "level": 2,
          "type": "categorized_dataframe",
          "row_count": 410,
          "categories": {
            "downtown": 281,
            "countryside": 129
          },
          "dimension_name": "location_type"
        }
      },
      {
        "id": "0038162d-579c-4ff7-9db6-3ee561261715",
        "level": 1,
        "level_name": "LEVEL_1_VECTOR",
        "parent_id": "c97a1d55-98a7-40f8-8cbc-0732899a55ba",
        "children_ids": [
          "c38fcb04-3240-4751-aff0-c2915410b6dd"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T16:27:12.571971",
        "decision_description": "Extracted column 'Taux de réussite G' as vector",
        "design_rationale": "Selected 'Taux de réussite G' as the target metric column. This column represents the key measurement for aggregation (originally requested: 'Taux de réussite G').",
        "params": {
          "column": "Taux de réussite G",
          "original_column": "Taux de réussite G",
          "filter_applied": null
        },
        "output_snapshot": {
          "level": 1,
          "type": "vector",
          "length": 410,
          "non_null_count": 410,
          "sample_values": [
            97.0,
            97.0,
            93.0,
            93.0,
            83.0
          ]
        }
      },
      {
        "id": "c38fcb04-3240-4751-aff0-c2915410b6dd",
        "level": 0,
        "level_name": "LEVEL_0_DATUM",
        "parent_id": "0038162d-579c-4ff7-9db6-3ee561261715",
        "children_ids": [
          "b3757c24-4c2d-4e96-a739-f7f0f677c41c"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T16:27:12.573006",
        "decision_description": "Computed MEAN = 88.2537",
        "design_rationale": "Average middle school success rate. Aggregated 410 values using 'mean' to produce a single atomic datum representing the key insight.",
        "params": {
          "aggregation_method": "mean",
          "input_count": 410,
          "description": "Average middle school success rate"
        },
        "output_snapshot": {
          "level": 0,
          "type": "datum",
          "value": 88.25365853658536,
          "aggregation": "mean"
        }
      },
      {
        "id": "b3757c24-4c2d-4e96-a739-f7f0f677c41c",
        "level": 1,
        "level_name": "LEVEL_1_VECTOR",
        "parent_id": "c38fcb04-3240-4751-aff0-c2915410b6dd",
        "children_ids": [
          "ae3dd4e3-c5f8-48e3-8f5b-d15ce75cb01b"
        ],
        "action": "ascend",
        "timestamp": "2025-12-08T16:27:12.573090",
        "decision_description": "Expanded to 410 source values",
        "design_rationale": "Re-expanded from atomic datum back to source vector to enable alternative dimensional views. This 'ascent' allows exploration of the data from different analytical perspectives.",
        "params": {
          "expansion_method": "source_recovery"
        },
        "output_snapshot": {
          "level": 1,
          "type": "vector",
          "length": 410
        }
      },
      {
        "id": "ae3dd4e3-c5f8-48e3-8f5b-d15ce75cb01b",
        "level": 2,
        "level_name": "LEVEL_2_CATEGORIZED",
        "parent_id": "b3757c24-4c2d-4e96-a739-f7f0f677c41c",
        "children_ids": [
          "b4066697-67e0-4bb1-a01f-c730e61127df"
        ],
        "action": "ascend",
        "timestamp": "2025-12-08T16:27:12.576272",
        "decision_description": "Applied 'performance_category' dimension",
        "design_rationale": "Added alternative analytical dimension 'performance_category' during ascent. This provides a different categorization perspective than the descent phase for comparative analysis.",
        "params": {
          "dimension_name": "performance_category",
          "dimension_function": "ascent_categorize_by_median"
        },
        "output_snapshot": {
          "level": 2,
          "type": "categorized_dataframe",
          "row_count": 410,
          "categories": {
            "above_median": 208,
            "below_median": 202
          }
        }
      },
      {
        "id": "b4066697-67e0-4bb1-a01f-c730e61127df",
        "level": 3,
        "level_name": "LEVEL_3_LINKED",
        "parent_id": "ae3dd4e3-c5f8-48e3-8f5b-d15ce75cb01b",
        "children_ids": [],
        "action": "ascend",
        "timestamp": "2025-12-08T16:27:12.590436",
        "decision_description": "Enriched table with ascent dimensions",
        "design_rationale": "Combined original linked table with new dimensional classification. The enriched L3 table now contains both the original semantic join relationships and the ascent-phase categorization 'performance_category', enabling cross-dimensional analysis.",
        "params": {
          "enrichment_method": "dimension_merge",
          "added_dimensions": [
            "performance_category"
          ]
        },
        "output_snapshot": {
          "level": 3,
          "type": "enriched_dataframe",
          "row_count": 410,
          "column_count": 112,
          "columns_sample": [
            "num_ligne",
            "Rentrée scolaire",
            "Code région académique",
            "Code région Insee",
            "Région académique",
            "Code académie",
            "Académie",
            "Code département",
            "Département",
            "Code commune"
          ]
        }
      }
    ],
    "root_id": "e2085df9-b305-4db8-8053-e42a48415fc7",
    "current_id": "b4066697-67e0-4bb1-a01f-c730e61127df"
  },
  "current_path": [
    "e2085df9-b305-4db8-8053-e42a48415fc7",
    "28ff39b5-3f2a-4a46-b3dc-edda4d6bde83",
    "c97a1d55-98a7-40f8-8cbc-0732899a55ba",
    "0038162d-579c-4ff7-9db6-3ee561261715",
    "c38fcb04-3240-4751-aff0-c2915410b6dd",
    "b3757c24-4c2d-4e96-a739-f7f0f677c41c",
    "ae3dd4e3-c5f8-48e3-8f5b-d15ce75cb01b",
    "b4066697-67e0-4bb1-a01f-c730e61127df"
  ],
  "cumulative_outputs": {
    "sources": {
      "level": 4,
      "level_name": "LEVEL_4_UNLINKABLE",
      "output_type": "dict_of_dataframes",
      "source_count": 2,
      "source_names": [
        "fr-en-college-effectifs-niveau-sexe-lv.csv",
        "fr-en-indicateurs-valeur-ajoutee-colleges.csv"
      ]
    },
    "joined_table": {
      "level": 3,
      "level_name": "LEVEL_3_LINKED",
      "output_type": "dataframe",
      "row_count": 410,
      "column_names": [
        "num_ligne",
        "Rentrée scolaire",
        "Code région académique",
        "Code région Insee",
        "Région académique",
        "Code académie",
        "Académie",
        "Code département",
        "Département",
        "Code commune",
        "Commune",
        "UAI",
        "Dénomination principale",
        "Patronyme",
        "Secteur",
        "REP",
        "REP +",
        "nombre_eleves_total",
        "Nombre d'élèves total hors Segpa hors ULIS",
        "Nombre d'élèves total Segpa"
      ],
      "join_columns": {
        "left": "Patronyme",
        "right": "Nom de l'établissement"
      }
    },
    "categorized_table": {
      "level": 2,
      "level_name": "LEVEL_2_CATEGORIZED",
      "output_type": "dataframe",
      "row_count": 410,
      "categories": {
        "downtown": 281,
        "countryside": 129
      },
      "dimension_column": "location_type"
    },
    "vector": {
      "level": 1,
      "level_name": "LEVEL_1_VECTOR",
      "output_type": "vector",
      "row_count": 410,
      "non_null_count": 410,
      "column_name": "Taux de réussite G"
    },
    "datum": {
      "level": 0,
      "level_name": "LEVEL_0_DATUM",
      "output_type": "datum",
      "value": 88.25365853658536,
      "aggregation_method": "mean",
      "description": "Average middle school success rate",
      "sample_data": "88.25365853658536"
    }
  },
  "design_choices_summary": {
    "L4_to_L3_join": "Semantic join: Patronyme ↔ Nom de l'établissement (threshold=0.85)",
    "L3_to_L2_categorization": "Dimension 'location_type' based on nombre_eleves_total",
    "L2_to_L1_extraction": "Column 'Taux de réussite G'",
    "L1_to_L0_aggregation": "MEAN: Average middle school success rate",
    "Ascent_L1_to_L2": "Dimension 'performance_category'"
  }
}