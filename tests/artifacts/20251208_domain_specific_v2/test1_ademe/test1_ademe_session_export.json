{
  "version": "1.0",
  "feature": "domain-specific-transformations",
  "exported_at": "2025-12-08T17:09:14.253626Z",
  "session_id": "test1_ademe_20251208_170902",
  "config_name": "test1_ademe",
  "config_description": "ADEME funding - environmental subsidies",
  "current_output": {
    "level": 3,
    "level_name": "LEVEL_3_LINKED",
    "output_type": "unknown",
    "value": "69586180.93"
  },
  "navigation_tree": {
    "nodes": [
      {
        "id": "6de94236-a673-4115-9f99-ffaa2333166c",
        "level": 4,
        "level_name": "LEVEL_4_UNLINKABLE",
        "parent_id": null,
        "children_ids": [
          "2c626b3d-ec54-40a3-9b77-8fb8f54025b9"
        ],
        "action": "entry",
        "timestamp": "2025-12-08T17:09:02.895128",
        "decision_description": "Loaded 2 raw data sources",
        "design_rationale": "L4 represents unlinkable raw files before semantic processing",
        "params": {
          "source_files": [
            "ECS.csv",
            "Les aides financieres ADEME.csv"
          ]
        },
        "output_snapshot": {
          "level": 4,
          "type": "dict_of_dataframes",
          "source_count": 2,
          "sources": {
            "ECS.csv": {
              "rows": 428,
              "columns": [
                "id",
                "cout_materiaux_ht",
                "cout_implementation_ht",
                "cout_total_ht",
                "cout_induit_ht"
              ]
            },
            "Les aides financieres ADEME.csv": {
              "rows": 37339,
              "columns": [
                "Nom de l attribuant",
                "idAttribuant",
                "dateConvention",
                "referenceDecision",
                "nomBeneficiaire"
              ]
            }
          }
        }
      },
      {
        "id": "2c626b3d-ec54-40a3-9b77-8fb8f54025b9",
        "level": 3,
        "level_name": "LEVEL_3_LINKED",
        "parent_id": "6de94236-a673-4115-9f99-ffaa2333166c",
        "children_ids": [
          "cf817bb2-6e5d-4375-81e3-70eea53178a5"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T17:09:14.210826",
        "decision_description": "Semantic join: dispositifAide ↔ type_aides_financieres",
        "design_rationale": "Used embedding-based semantic matching (threshold=0.75) to link 'Les aides financieres ADEME.csv' with 'ECS.csv'. This creates relationships between previously unlinkable records based on semantic similarity of text fields.",
        "params": {
          "left_file": "Les aides financieres ADEME.csv",
          "right_file": "ECS.csv",
          "left_column": "dispositifAide",
          "right_column": "type_aides_financieres",
          "similarity_threshold": 0.75,
          "join_type": "semantic_best_match"
        },
        "output_snapshot": {
          "level": 3,
          "type": "joined_dataframe",
          "row_count": 500,
          "column_count": 47,
          "has_similarity_column": true,
          "columns_sample": [
            "Nom de l attribuant",
            "idAttribuant",
            "dateConvention",
            "referenceDecision",
            "nomBeneficiaire",
            "idBeneficiaire",
            "objet",
            "dispositifAide",
            "montant",
            "nature"
          ]
        }
      },
      {
        "id": "cf817bb2-6e5d-4375-81e3-70eea53178a5",
        "level": 2,
        "level_name": "LEVEL_2_CATEGORIZED",
        "parent_id": "2c626b3d-ec54-40a3-9b77-8fb8f54025b9",
        "children_ids": [
          "4774a6cf-3735-4f45-846a-59e834125b23"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T17:09:14.226433",
        "decision_description": "Applied 'funding_frequency' dimension using categorize_ademe_funding",
        "design_rationale": "Counted occurrences of 'nomBeneficiaire' to identify recipients with single vs multiple fundings. Categories: {'single_funding': 412, 'multiple_funding': 88}",
        "params": {
          "category_name": "funding_frequency",
          "category_column": "nomBeneficiaire",
          "category_function": "categorize_ademe_funding",
          "method": "Counted occurrences of 'nomBeneficiaire' to identify recipients with single vs multiple fundings"
        },
        "output_snapshot": {
          "level": 2,
          "type": "categorized_dataframe",
          "row_count": 500,
          "categories": {
            "single_funding": 412,
            "multiple_funding": 88
          },
          "dimension_name": "funding_frequency"
        }
      },
      {
        "id": "4774a6cf-3735-4f45-846a-59e834125b23",
        "level": 1,
        "level_name": "LEVEL_1_VECTOR",
        "parent_id": "cf817bb2-6e5d-4375-81e3-70eea53178a5",
        "children_ids": [
          "79dfa3ec-d0f6-4ed0-9875-8a1ccb838982"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T17:09:14.238190",
        "decision_description": "Grouped 'montant' by 'nomBeneficiaire' (sum)",
        "design_rationale": "Aggregated 'montant' per 'nomBeneficiaire' using sum. This creates a vector of 450 unique nomBeneficiaire values with their total montant.",
        "params": {
          "column": "montant",
          "original_column": "montant",
          "filter_applied": null,
          "group_by": "nomBeneficiaire",
          "group_agg": "sum"
        },
        "output_snapshot": {
          "level": 1,
          "type": "vector",
          "length": 450,
          "non_null_count": 450,
          "sample_values": [
            22083.0,
            401563.25,
            8977.5,
            4320.0,
            17160.5
          ]
        }
      },
      {
        "id": "79dfa3ec-d0f6-4ed0-9875-8a1ccb838982",
        "level": 0,
        "level_name": "LEVEL_0_DATUM",
        "parent_id": "4774a6cf-3735-4f45-846a-59e834125b23",
        "children_ids": [
          "62a3cff6-25d9-485d-a0af-61f2f36d5ca8"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T17:09:14.239029",
        "decision_description": "Computed SUM = 69586180.9300",
        "design_rationale": "Total ADEME funding amount. Aggregated 450 values using 'sum' to produce a single atomic datum representing the key insight.",
        "params": {
          "aggregation_method": "sum",
          "input_count": 450,
          "description": "Total ADEME funding amount"
        },
        "output_snapshot": {
          "level": 0,
          "type": "datum",
          "value": 69586180.93,
          "aggregation": "sum"
        }
      },
      {
        "id": "62a3cff6-25d9-485d-a0af-61f2f36d5ca8",
        "level": 1,
        "level_name": "LEVEL_1_VECTOR",
        "parent_id": "79dfa3ec-d0f6-4ed0-9875-8a1ccb838982",
        "children_ids": [
          "b88d8677-5024-4726-9a36-12906bc3ba97"
        ],
        "action": "ascend",
        "timestamp": "2025-12-08T17:09:14.239103",
        "decision_description": "Expanded to 450 source values",
        "design_rationale": "Re-expanded from atomic datum back to source vector to enable alternative dimensional views. This 'ascent' allows exploration of the data from different analytical perspectives.",
        "params": {
          "expansion_method": "source_recovery"
        },
        "output_snapshot": {
          "level": 1,
          "type": "vector",
          "length": 450
        }
      },
      {
        "id": "b88d8677-5024-4726-9a36-12906bc3ba97",
        "level": 2,
        "level_name": "LEVEL_2_CATEGORIZED",
        "parent_id": "62a3cff6-25d9-485d-a0af-61f2f36d5ca8",
        "children_ids": [
          "00da1173-48bf-457a-80db-bc7372f81910"
        ],
        "action": "ascend",
        "timestamp": "2025-12-08T17:09:14.242471",
        "decision_description": "Applied 'funding_size' dimension",
        "design_rationale": "Added alternative analytical dimension 'funding_size' during ascent. This provides a different categorization perspective than the descent phase for comparative analysis.",
        "params": {
          "dimension_name": "funding_size",
          "dimension_function": "ascent_categorize_funding_threshold"
        },
        "output_snapshot": {
          "level": 2,
          "type": "categorized_dataframe",
          "row_count": 450,
          "categories": {
            "above_10k": 301,
            "below_10k": 149
          }
        }
      },
      {
        "id": "00da1173-48bf-457a-80db-bc7372f81910",
        "level": 3,
        "level_name": "LEVEL_3_LINKED",
        "parent_id": "b88d8677-5024-4726-9a36-12906bc3ba97",
        "children_ids": [],
        "action": "ascend",
        "timestamp": "2025-12-08T17:09:14.253616",
        "decision_description": "Enriched table with ascent dimensions",
        "design_rationale": "Combined original linked table with new dimensional classification. The enriched L3 table now contains both the original semantic join relationships and the ascent-phase categorization 'funding_size', enabling cross-dimensional analysis.",
        "params": {
          "enrichment_method": "dimension_merge",
          "added_dimensions": [
            "funding_size"
          ]
        },
        "output_snapshot": {
          "level": 3,
          "type": "enriched_dataframe",
          "row_count": 450,
          "column_count": 48,
          "columns_sample": [
            "Nom de l attribuant",
            "idAttribuant",
            "dateConvention",
            "referenceDecision",
            "nomBeneficiaire",
            "idBeneficiaire",
            "objet",
            "dispositifAide",
            "montant",
            "nature"
          ]
        }
      }
    ],
    "root_id": "6de94236-a673-4115-9f99-ffaa2333166c",
    "current_id": "00da1173-48bf-457a-80db-bc7372f81910"
  },
  "current_path": [
    "6de94236-a673-4115-9f99-ffaa2333166c",
    "2c626b3d-ec54-40a3-9b77-8fb8f54025b9",
    "cf817bb2-6e5d-4375-81e3-70eea53178a5",
    "4774a6cf-3735-4f45-846a-59e834125b23",
    "79dfa3ec-d0f6-4ed0-9875-8a1ccb838982",
    "62a3cff6-25d9-485d-a0af-61f2f36d5ca8",
    "b88d8677-5024-4726-9a36-12906bc3ba97",
    "00da1173-48bf-457a-80db-bc7372f81910"
  ],
  "cumulative_outputs": {
    "sources": {
      "level": 4,
      "level_name": "LEVEL_4_UNLINKABLE",
      "output_type": "dict_of_dataframes",
      "source_count": 2,
      "source_names": [
        "ECS.csv",
        "Les aides financieres ADEME.csv"
      ]
    },
    "joined_table": {
      "level": 3,
      "level_name": "LEVEL_3_LINKED",
      "output_type": "dataframe",
      "row_count": 500,
      "column_names": [
        "Nom de l attribuant",
        "idAttribuant",
        "dateConvention",
        "referenceDecision",
        "nomBeneficiaire",
        "idBeneficiaire",
        "objet",
        "dispositifAide",
        "montant",
        "nature",
        "conditionsVersement",
        "datesPeriodeVersement",
        "idRAE",
        "notificationUE",
        "id",
        "cout_materiaux_ht",
        "cout_implementation_ht",
        "cout_total_ht",
        "cout_induit_ht",
        "date_signature_devis"
      ],
      "join_columns": {
        "left": "dispositifAide",
        "right": "type_aides_financieres"
      }
    },
    "categorized_table": {
      "level": 2,
      "level_name": "LEVEL_2_CATEGORIZED",
      "output_type": "dataframe",
      "row_count": 500,
      "categories": {
        "single_funding": 412,
        "multiple_funding": 88
      },
      "dimension_column": "funding_frequency"
    },
    "vector": {
      "level": 1,
      "level_name": "LEVEL_1_VECTOR",
      "output_type": "vector",
      "row_count": 450,
      "non_null_count": 450,
      "column_name": "montant"
    },
    "datum": {
      "level": 0,
      "level_name": "LEVEL_0_DATUM",
      "output_type": "datum",
      "value": 69586180.93,
      "aggregation_method": "sum",
      "description": "Total ADEME funding amount",
      "sample_data": "69586180.93"
    }
  },
  "design_choices_summary": {
    "L4_to_L3_join": "Semantic join: dispositifAide ↔ type_aides_financieres (threshold=0.75)",
    "L3_to_L2_categorization": "Dimension 'funding_frequency' based on nomBeneficiaire",
    "L2_to_L1_extraction": "Column 'montant'",
    "L1_to_L0_aggregation": "SUM: Total ADEME funding amount",
    "Ascent_L1_to_L2": "Dimension 'funding_size'"
  }
}