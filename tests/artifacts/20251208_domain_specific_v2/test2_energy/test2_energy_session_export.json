{
  "version": "1.0",
  "feature": "domain-specific-transformations",
  "exported_at": "2025-12-08T16:27:25.652067Z",
  "session_id": "test2_energy_20251208_162718",
  "config_name": "test2_energy",
  "config_description": "Energy consumption - prices and imports/exports",
  "current_output": {
    "level": 3,
    "level_name": "LEVEL_3_LINKED",
    "output_type": "unknown",
    "value": "0.0"
  },
  "navigation_tree": {
    "nodes": [
      {
        "id": "b6bffb73-0075-42fc-91f8-96f5c0ceefe5",
        "level": 4,
        "level_name": "LEVEL_4_UNLINKABLE",
        "parent_id": null,
        "children_ids": [
          "3ffd614a-19ec-4176-8653-a1efb1e79822"
        ],
        "action": "entry",
        "timestamp": "2025-12-08T16:27:19.944475",
        "decision_description": "Loaded 2 raw data sources",
        "design_rationale": "L4 represents unlinkable raw files before semantic processing",
        "params": {
          "source_files": [
            "imports-exports-commerciaux.csv",
            "Niveaux_prix_TRVG.csv"
          ]
        },
        "output_snapshot": {
          "level": 4,
          "type": "dict_of_dataframes",
          "source_count": 2,
          "sources": {
            "imports-exports-commerciaux.csv": {
              "rows": 175340,
              "columns": [
                "Date",
                "Tranche horaire du programme d'échange",
                "FR vers GB (MWh)",
                "GB vers FR (MWh)",
                "FR vers CH (MWh)"
              ]
            },
            "Niveaux_prix_TRVG.csv": {
              "rows": 9763,
              "columns": [
                "CODE_INSEE",
                "CODE_POSTAL",
                "LIBELLE_COMMUNE",
                "NIVEAU_PRIX"
              ]
            }
          }
        }
      },
      {
        "id": "3ffd614a-19ec-4176-8653-a1efb1e79822",
        "level": 3,
        "level_name": "LEVEL_3_LINKED",
        "parent_id": "b6bffb73-0075-42fc-91f8-96f5c0ceefe5",
        "children_ids": [
          "7cd2bad0-d44c-443c-bab9-b691b7ef20ef"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T16:27:25.638366",
        "decision_description": "Semantic join: LIBELLE_COMMUNE ↔ Date",
        "design_rationale": "Used embedding-based semantic matching (threshold=0.9) to link 'Niveaux_prix_TRVG.csv' with 'imports-exports-commerciaux.csv'. This creates relationships between previously unlinkable records based on semantic similarity of text fields.",
        "params": {
          "left_file": "Niveaux_prix_TRVG.csv",
          "right_file": "imports-exports-commerciaux.csv",
          "left_column": "LIBELLE_COMMUNE",
          "right_column": "Date",
          "similarity_threshold": 0.9,
          "join_type": "semantic_best_match"
        },
        "output_snapshot": {
          "level": 3,
          "type": "joined_dataframe",
          "row_count": 0,
          "column_count": 19,
          "has_similarity_column": true,
          "columns_sample": [
            "CODE_INSEE",
            "CODE_POSTAL",
            "LIBELLE_COMMUNE",
            "NIVEAU_PRIX",
            "Date",
            "Tranche horaire du programme d'échange",
            "FR vers GB (MWh)",
            "GB vers FR (MWh)",
            "FR vers CH (MWh)",
            "CH vers FR (MWh)"
          ]
        }
      },
      {
        "id": "7cd2bad0-d44c-443c-bab9-b691b7ef20ef",
        "level": 2,
        "level_name": "LEVEL_2_CATEGORIZED",
        "parent_id": "3ffd614a-19ec-4176-8653-a1efb1e79822",
        "children_ids": [
          "1ab20dca-74fe-4ffd-965d-e261463a29b7"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T16:27:25.649223",
        "decision_description": "Applied 'price_category' dimension",
        "design_rationale": "Categorized rows using business logic based on 'Prix'. This adds analytical dimensions that enable grouping and filtering for downstream analysis.",
        "params": {
          "category_name": "price_category",
          "category_column": "Prix",
          "category_function": "categorize_energy_price"
        },
        "output_snapshot": {
          "level": 2,
          "type": "categorized_dataframe",
          "row_count": 0,
          "categories": {},
          "dimension_name": "price_category"
        }
      },
      {
        "id": "1ab20dca-74fe-4ffd-965d-e261463a29b7",
        "level": 1,
        "level_name": "LEVEL_1_VECTOR",
        "parent_id": "7cd2bad0-d44c-443c-bab9-b691b7ef20ef",
        "children_ids": [
          "c36dc413-296e-437d-b3dd-e88dd1363ac1"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T16:27:25.650595",
        "decision_description": "Extracted column 'price_category' as vector",
        "design_rationale": "Selected 'price_category' as the target metric column. This column represents the key measurement for aggregation (originally requested: 'Valeur').",
        "params": {
          "column": "price_category",
          "original_column": "Valeur",
          "filter_applied": null
        },
        "output_snapshot": {
          "level": 1,
          "type": "vector",
          "length": 0,
          "non_null_count": 0,
          "sample_values": []
        }
      },
      {
        "id": "c36dc413-296e-437d-b3dd-e88dd1363ac1",
        "level": 0,
        "level_name": "LEVEL_0_DATUM",
        "parent_id": "1ab20dca-74fe-4ffd-965d-e261463a29b7",
        "children_ids": [
          "fd5245af-e270-4198-aef5-bcfc77b0b3d5"
        ],
        "action": "descend",
        "timestamp": "2025-12-08T16:27:25.650846",
        "decision_description": "Computed SUM = 0.0000",
        "design_rationale": "Total energy imports from foreign countries. Aggregated 0 values using 'sum' to produce a single atomic datum representing the key insight.",
        "params": {
          "aggregation_method": "sum",
          "input_count": 0,
          "description": "Total energy imports from foreign countries"
        },
        "output_snapshot": {
          "level": 0,
          "type": "datum",
          "value": 0.0,
          "aggregation": "sum"
        }
      },
      {
        "id": "fd5245af-e270-4198-aef5-bcfc77b0b3d5",
        "level": 1,
        "level_name": "LEVEL_1_VECTOR",
        "parent_id": "c36dc413-296e-437d-b3dd-e88dd1363ac1",
        "children_ids": [
          "d2f65c27-160e-4798-9d21-3e75e1a14b78"
        ],
        "action": "ascend",
        "timestamp": "2025-12-08T16:27:25.650904",
        "decision_description": "Expanded to 0 source values",
        "design_rationale": "Re-expanded from atomic datum back to source vector to enable alternative dimensional views. This 'ascent' allows exploration of the data from different analytical perspectives.",
        "params": {
          "expansion_method": "source_recovery"
        },
        "output_snapshot": {
          "level": 1,
          "type": "vector",
          "length": 0
        }
      },
      {
        "id": "d2f65c27-160e-4798-9d21-3e75e1a14b78",
        "level": 2,
        "level_name": "LEVEL_2_CATEGORIZED",
        "parent_id": "fd5245af-e270-4198-aef5-bcfc77b0b3d5",
        "children_ids": [
          "f62d3353-22b8-4f40-91ec-bb42b2a5ac34"
        ],
        "action": "ascend",
        "timestamp": "2025-12-08T16:27:25.651698",
        "decision_description": "Applied 'import_category' dimension",
        "design_rationale": "Added alternative analytical dimension 'import_category' during ascent. This provides a different categorization perspective than the descent phase for comparative analysis.",
        "params": {
          "dimension_name": "import_category",
          "dimension_function": "ascent_categorize_by_median"
        },
        "output_snapshot": {
          "level": 2,
          "type": "categorized_dataframe",
          "row_count": 0,
          "categories": {}
        }
      },
      {
        "id": "f62d3353-22b8-4f40-91ec-bb42b2a5ac34",
        "level": 3,
        "level_name": "LEVEL_3_LINKED",
        "parent_id": "d2f65c27-160e-4798-9d21-3e75e1a14b78",
        "children_ids": [],
        "action": "ascend",
        "timestamp": "2025-12-08T16:27:25.652061",
        "decision_description": "Enriched table with ascent dimensions",
        "design_rationale": "Combined original linked table with new dimensional classification. The enriched L3 table now contains both the original semantic join relationships and the ascent-phase categorization 'import_category', enabling cross-dimensional analysis.",
        "params": {
          "enrichment_method": "dimension_merge",
          "added_dimensions": [
            "import_category"
          ]
        },
        "output_snapshot": {
          "level": 3,
          "type": "enriched_dataframe",
          "row_count": 0,
          "column_count": 2,
          "columns_sample": [
            "value",
            "import_category"
          ]
        }
      }
    ],
    "root_id": "b6bffb73-0075-42fc-91f8-96f5c0ceefe5",
    "current_id": "f62d3353-22b8-4f40-91ec-bb42b2a5ac34"
  },
  "current_path": [
    "b6bffb73-0075-42fc-91f8-96f5c0ceefe5",
    "3ffd614a-19ec-4176-8653-a1efb1e79822",
    "7cd2bad0-d44c-443c-bab9-b691b7ef20ef",
    "1ab20dca-74fe-4ffd-965d-e261463a29b7",
    "c36dc413-296e-437d-b3dd-e88dd1363ac1",
    "fd5245af-e270-4198-aef5-bcfc77b0b3d5",
    "d2f65c27-160e-4798-9d21-3e75e1a14b78",
    "f62d3353-22b8-4f40-91ec-bb42b2a5ac34"
  ],
  "cumulative_outputs": {
    "sources": {
      "level": 4,
      "level_name": "LEVEL_4_UNLINKABLE",
      "output_type": "dict_of_dataframes",
      "source_count": 2,
      "source_names": [
        "imports-exports-commerciaux.csv",
        "Niveaux_prix_TRVG.csv"
      ]
    },
    "joined_table": {
      "level": 3,
      "level_name": "LEVEL_3_LINKED",
      "output_type": "dataframe",
      "row_count": 0,
      "column_names": [
        "CODE_INSEE",
        "CODE_POSTAL",
        "LIBELLE_COMMUNE",
        "NIVEAU_PRIX",
        "Date",
        "Tranche horaire du programme d'échange",
        "FR vers GB (MWh)",
        "GB vers FR (MWh)",
        "FR vers CH (MWh)",
        "CH vers FR (MWh)",
        "FR vers IT (MWh)",
        "IT vers FR (MWh)",
        "FR vers ES (MWh)",
        "ES vers FR (MWh)",
        "Export France (MWh)",
        "Import France (MWh)",
        "CWE/Core->FR",
        "FR->CWE/Core",
        "_semantic_similarity"
      ],
      "join_columns": {
        "left": "LIBELLE_COMMUNE",
        "right": "Date"
      }
    },
    "categorized_table": {
      "level": 2,
      "level_name": "LEVEL_2_CATEGORIZED",
      "output_type": "dataframe",
      "row_count": 0,
      "categories": {},
      "dimension_column": "price_category"
    },
    "vector": {
      "level": 1,
      "level_name": "LEVEL_1_VECTOR",
      "output_type": "vector",
      "row_count": 0,
      "non_null_count": 0,
      "column_name": "price_category"
    },
    "datum": {
      "level": 0,
      "level_name": "LEVEL_0_DATUM",
      "output_type": "datum",
      "value": 0.0,
      "aggregation_method": "sum",
      "description": "Total energy imports from foreign countries",
      "sample_data": "0.0"
    }
  },
  "design_choices_summary": {
    "L4_to_L3_join": "Semantic join: Pays ↔ Pays (threshold=0.9)",
    "L3_to_L2_categorization": "Dimension 'price_category' based on Prix",
    "L2_to_L1_extraction": "Column 'Valeur'",
    "L1_to_L0_aggregation": "SUM: Total energy imports from foreign countries",
    "Ascent_L1_to_L2": "Dimension 'import_category'"
  }
}